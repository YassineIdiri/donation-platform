<a routerLink="/" style="text-decoration:none;">← Retour</a>

<h1 style="margin:12px 0;">Faire un don</h1>

<div *ngIf="loading">Chargement…</div>

<div *ngIf="error" style="color:#b91c1c; margin:8px 0;">{{ error }}</div>
<div *ngIf="toast" style="margin:8px 0;">{{ toast }}</div>

<form *ngIf="!loading" [formGroup]="form" (ngSubmit)="pay()" style="display:flex; flex-direction:column; gap:12px;">
  <div>
    <div style="margin-bottom:8px; font-weight:600;">Montant</div>
    <div style="display:flex; flex-wrap:wrap; gap:8px;">
      <button type="button" *ngFor="let a of suggested"
              (click)="selectAmount(a)"
              style="padding:8px 12px; border-radius:10px; border:1px solid #ddd; background:#fff;">
        {{ a }} €
      </button>
    </div>
  </div>

  <label style="display:flex; flex-direction:column; gap:6px;">
    Autre montant (€)
    <input type="number" min="1" formControlName="amount" style="padding:10px; border:1px solid #ddd; border-radius:10px;" />
  </label>
  <div *ngIf="form.get('amount')?.touched && form.get('amount')?.invalid" style="color:#b91c1c;">
    Montant requis (min 1€).
  </div>

  <label style="display:flex; flex-direction:column; gap:6px;">
    Email (optionnel)
    <input type="email" formControlName="email" placeholder="vous@exemple.com"
           style="padding:10px; border:1px solid #ddd; border-radius:10px;" />
  </label>

  <label style="display:flex; gap:10px; align-items:center;">
    <input type="checkbox" formControlName="consent" />
    J’accepte la politique de confidentialité
  </label>
  <div *ngIf="form.get('consent')?.touched && form.get('consent')?.invalid" style="color:#b91c1c;">
    Obligatoire.
  </div>

  <button type="submit" [disabled]="paying"
          style="padding:12px 16px; border-radius:12px; border:none; color:white; background: var(--primary, #0ea5e9); font-weight:700;">
    {{ paying ? 'Redirection…' : 'Payer par carte' }}
  </button>
</form>
